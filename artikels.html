<!DOCTYPE html>
<html lang="nl">
<head>
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4062633211824348"
    crossorigin="anonymous"></script>

  <meta charset="UTF-8" />
  <title>Voetbal4All - Artikels & verhalen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="style.css" />
</head>

<body class="v4-hide-live-mobile">
  <div class="page">

    <!-- NAVBAR -->
    <header class="navbar">
      <div class="shell">
        <div class="navbar-inner">

          <a href="index.html" class="brand brand--logo-only">
            <img
              src="assets/img/brand/logo-voetbal4all.svg"
              alt="Voetbal4All"
              class="brand-logo"
              loading="eager"
            />
          </a>

          <nav class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="artikels.html" class="nav-link nav-link--active">Artikels</a>

            <!-- SPORTIEVE EVENTS -->
            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Sportieve events <span class="nav-link-caret">â–¾</span>
              </button>
              <div class="nav-dropdown">
                <a href="events.html" class="nav-dropdown-link">Alle sportieve events</a>
                <a href="events.html?type=Tornooi" class="nav-dropdown-link">Tornooien</a>
                <a href="events.html?type=Vriendschappelijk" class="nav-dropdown-link">Vriendschappelijke wedstrijden</a>
                <a href="stages.html" class="nav-dropdown-link">Stages</a>
                <a href="events.html?type=Voetbalkamp" class="nav-dropdown-link">Voetbalkampen</a>
              </div>
            </div>

            <!-- CLUB & FUN -->
            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Club &amp; fun <span class="nav-link-caret">â–¾</span>
              </button>
              <div class="nav-dropdown">
                <a href="algemene-events.html" class="nav-dropdown-link">Alle club &amp; fun events</a>
                <a href="dinners.html" class="nav-dropdown-link">Dinners &amp; eetdagen</a>
                <a href="algemene-events.html?type=Spelavond" class="nav-dropdown-link">Spelavonden &amp; acties</a>
                <a href="algemene-events.html?type=Fuif" class="nav-dropdown-link">Fuif / afterparty</a>
                <a href="algemene-events.html?type=Sponsor" class="nav-dropdown-link">Sponsor &amp; netwerk</a>
              </div>
            </div>

            <!-- VACATURES & PROFIELEN -->
            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Vacatures &amp; profielen <span class="nav-link-caret">â–¾</span>
              </button>
              <div class="nav-dropdown">
                <a href="clubvacatures.html" class="nav-dropdown-link">Clubvacatures</a>
                <a href="trainers.html" class="nav-dropdown-link">Trainers</a>
                <a href="spelers.html" class="nav-dropdown-link">Spelers</a>
              </div>
            </div>

            <!-- SPORTIEF -->
            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Sportief <span class="nav-link-caret">â–¾</span>
              </button>
              <div class="nav-dropdown">
                <a href="sportief-spelers.html" class="nav-dropdown-link">Spelersstatistieken</a>
                <a href="sportief-teams.html" class="nav-dropdown-link">Teamstatistieken</a>
                <a href="sportief-resultaten.html" class="nav-dropdown-link">Resultaten</a>
                <a href="sportief-rangschikkingen.html" class="nav-dropdown-link">Rangschikkingen</a>
                <a href="sportief-teams-in-de-kijker.html" class="nav-dropdown-link">Team/Medewerker in de kijker</a>
                <a href="sportief-supportersclubs.html" class="nav-dropdown-link">Supportersclubs</a>
              </div>
            </div>

            <!-- VOETBAL4ALL -->
            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Voetbal4All <span class="nav-link-caret">â–¾</span>
              </button>
              <div class="nav-dropdown">
                <a href="gebruiksvoorwaarden.html" class="nav-dropdown-link">Gebruiksvoorwaarden</a>
                <a href="privacyverklaring.html" class="nav-dropdown-link">Privacyverklaring</a>
                <a href="contact.html" class="nav-dropdown-link">Contact</a>
              </div>
            </div>
          </nav>

          <a href="adverteren.html" class="nav-cta">
            <span>Adverteer nu</span>
            <span>Sponsor &amp; Ads</span>
          </a>

          <button class="nav-burger" aria-label="Menu">â˜°</button>
        </div>
      </div>
    </header>

    <!-- LIVE BANNER -->
    <section class="live-banner-top">
      <div class="shell">
        <div class="live-banner">
          <div class="live-label"><span class="live-dot"></span>Live resultaten</div>
          <div class="live-text">
            <span class="live-text-main"></span>
            <div class="live-updated"></div>
          </div>
          <div class="live-socials" aria-label="Volg Voetbal4All">
            <div class="live-socials-label">Volg ons</div>
            <div class="live-socials-icons"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- HEADER AD -->
    <section class="section-main" style="padding-top:10px;padding-bottom:10px;">
      <div class="shell">
        <div class="ad-slot ad-slot-header sticky-ad-header">
          <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-4062633211824348"
            data-ad-slot="3518144343"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>
      </div>
    </section>

    <main>
      <section class="section-main">
        <div class="shell">

          <!-- INTRO -->
          <article class="card" style="margin-bottom:12px;">
            <div class="card-header">
              <div>
                <div class="card-caption">Artikels</div>
                <div class="card-title">Laatste voetbalnieuws &amp; verhalen (BE &amp; NL)</div>
              </div>
              <span class="pill-small" id="news-count">â€”</span>
            </div>
            <p class="note">
              Filter op land en categorie, en zoek op club/competitie. De feed komt uit de backend via <strong>/api/news</strong>.
            </p>
          </article>

          <div class="v4-layout-sidebar">

            <!-- LINKS -->
            <div class="v4-content">

              <!-- ZOEK + FILTERS -->
              <div class="search-bar search-bar--advanced" style="margin-bottom:12px;">
                <input type="text" id="article-search-text" class="search-input" placeholder="Zoek op titel, club, competitie..." />
                <div class="search-filters-row">
                  <select id="article-filter-country" class="search-select">
                    <option value="">Land (alles)</option>
                    <option value="BE">ğŸ‡§ğŸ‡ª BelgiÃ«</option>
                    <option value="NL">ğŸ‡³ğŸ‡± Nederland</option>
                  </select>

                  <select id="article-filter-category" class="search-select">
                    <option value="">Categorie (alles)</option>
                    <option value="Jupiler Pro League">Jupiler Pro League</option>
                    <option value="Challenger Pro League">Challenger Pro League</option>
                    <option value="Beker">Beker</option>
                    <option value="Amateur">Amateur</option>
                    <option value="Jeugd">Jeugd</option>
                    <option value="Internationaal">Internationaal</option>
                    <option value="Vrouwen">Vrouwen</option>
                    <option value="Transfers">Transfers</option>
                    <option value="Algemeen">Algemeen</option>
                  </select>
                </div>
                <div class="form-helper">
                  Tip: klik op â€œLees artikelâ€ om jouw Voetbal4All-artikelpagina te openen.
                </div>
              </div>

              <!-- TOP INFEED AD -->
              <section class="section-main" style="padding-top:0;padding-bottom:10px;">
                <div class="ad-infeed">
                  <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-4062633211824348"
                    data-ad-slot="4831226012"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                </div>
              </section>

              <!-- OVERZICHT -->
              <section class="section-main" style="padding-top:0;">
                <div class="card">
                  <div class="card-header">
                    <div>
                      <div class="card-caption">Overzicht</div>
                      <div class="card-title">Laatste artikels &amp; verhalen</div>
                    </div>
                    <span class="pill-small" id="news-count-2">â€”</span>
                  </div>

                  <div id="article-list" class="ad-card-list ad-card-list--stack">
                    <!-- gevuld via backend -->
                  </div>

                  <p id="news-status" class="note" style="margin-top:10px; display:none;"></p>
                </div>
              </section>

            </div>

            <!-- RECHTS -->
            <aside class="v4-sidebar">
              <div class="v4-sidebar-sticky">

                <article class="card">
                  <div class="card-header">
                    <div>
                      <div class="card-caption">Advertentie</div>
                      <div class="card-title">Sponsor / Partner</div>
                    </div>
                    <span class="pill-small">Premium</span>
                  </div>
                  <div class="ad-placeholder">
                    Vaste partnerzone naast artikels. Ideaal voor sponsors, lokale ondernemers en sportdiensten.
                    <br/>
                    <span class="ad-size">Aanrader: 300 Ã— 250 of 300 Ã— 600</span>
                  </div>
                </article>

                <div class="ad-vertical v4-ad-sticky" style="margin-top:12px;">
                  <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-4062633211824348"
                    data-ad-slot="6032627042"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                </div>

              </div>
            </aside>

          </div>

        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer" id="footer-contact">
      <div class="shell">
        <div class="footer-grid">
          <div class="footer-brand">
            <div>Voetbal4All Â· voor spelers, ouders, trainers en clubs.</div>
            <div class="footer-legal">
              &copy; <span id="year"></span> Voetbal4All. Alle rechten voorbehouden.
            </div>
            <div class="footer-social">
              <a href="https://www.facebook.com/voetbal4all" target="_blank" rel="noopener noreferrer" class="footer-social-link">Facebook</a>
              <a href="https://www.instagram.com/voetbal.4.all/" target="_blank" rel="noopener noreferrer" class="footer-social-link">Instagram</a>
              <a href="https://www.tiktok.com/@voetbal4all.eu" target="_blank" rel="noopener noreferrer" class="footer-social-link">TikTok</a>
            </div>
          </div>
          <div class="footer-ad">
            FOOTER ADVERTENTIE / PARTNERLOGO<br>
            <span class="ad-size">Footer-banner</span>
          </div>
        </div>
      </div>
    </footer>

  </div>

  <script>
    // Footer year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Backend endpoints
    const IMG_BASE = "https://voetbal4all-backend.onrender.com";
    const NEWS_URL = IMG_BASE + "/api/news";

    const articleList = document.getElementById("article-list");
    const newsStatus = document.getElementById("news-status");
    const newsCountTop = document.getElementById("news-count");
    const newsCountTop2 = document.getElementById("news-count-2");

    const articleSearchText = document.getElementById("article-search-text");
    const articleFilterCountry = document.getElementById("article-filter-country");
    const articleFilterCategory = document.getElementById("article-filter-category");

    let allItems = [];

    function safe(s){ return (s ?? "").toString(); }
    function norm(s){ return safe(s).toLowerCase().trim(); }

    function flag(country) {
      const raw = (country ?? "").toString().trim();
      if (!raw) return "ğŸŒ";

      const c = raw.toLowerCase();

      // ISO-2
      if (c === "be") return "ğŸ‡§ğŸ‡ª";
      if (c === "nl") return "ğŸ‡³ğŸ‡±";

      // ISO-3
      if (c === "bel") return "ğŸ‡§ğŸ‡ª";
      if (c === "nld") return "ğŸ‡³ğŸ‡±";

      // Volledige namen / varianten
      if (c.includes("belg")) return "ğŸ‡§ğŸ‡ª";         // belgium, belgiÃ«, belgique
      if (c.includes("neder")) return "ğŸ‡³ğŸ‡±";        // nederland, nederlands
      if (c.includes("nether")) return "ğŸ‡³ğŸ‡±";       // netherlands

      // UK/GB (komt vaak voor bij Engelse bronnen)
      if (c === "uk" || c === "gb" || c.includes("united kingdom")) return "ğŸ‡¬ğŸ‡§";

      return "ğŸŒ";
    }

    function fmtDate(iso){
      if (!iso) return "";
      const d = new Date(iso);
      if (isNaN(d.getTime())) return safe(iso);
      return d.toLocaleDateString("nl-BE", { year: "numeric", month: "short", day: "2-digit" });
    }

    function toImgUrl(publicPath){
      const p = safe(publicPath);
      if (!p) return "";
      // publicPath verwacht zoals "/images/articles/xyz.jpg"
      if (p.startsWith("http://") || p.startsWith("https://")) return p;
      if (p.startsWith("/")) return IMG_BASE + p;
      return IMG_BASE + "/" + p;
    }

    function renderAdInfeed(slot){
      return `
        <div class="ad-infeed" style="margin: 10px 0;">
          <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-4062633211824348"
            data-ad-slot="${slot}"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        </div>
      `;
    }

      function renderCard(a){
        const title = safe(a.title);
        const fileName = a.fileName || "";
        const url = fileName ? ("artikel.html?file=" + encodeURIComponent(fileName)) : "#";

        const country = safe(a.country || "");
        const category = safe(a.category || "Algemeen");
        const date = safe(a.publishedAt || a.date || a.createdAt || "");
        const snippet = safe(a.snippet || "");

        const imgUrl = toImgUrl(a?.image?.publicPath);
        const safeTitleAttr = (a.title || "").replace(/"/g, "&quot;");

        return `
          <article class="ad-card">
            <div class="ad-card-header" style="display:flex; gap:12px; align-items:flex-start;">
              ${imgUrl ? `
                <img
                  src="${imgUrl}"
                  alt="${safeTitleAttr}"
                  loading="lazy"
                  style="width:96px;height:64px;object-fit:cover;border-radius:10px;flex:0 0 auto;"
                >
              ` : ``}

              <div style="min-width:0;flex:1;">
                <div class="ad-card-title">${title}</div>
                <div class="ad-card-meta">${flag(country)} ${country || "â€”"} Â· ${category} Â· Voetbal4All</div>
                <div class="ad-card-meta">${fmtDate(date)}</div>
              </div>
            </div>

            ${snippet ? `<p class="note" style="margin-top:10px;">${snippet}</p>` : ""}

            <div class="ad-card-actions" style="margin-top:10px;">
              <a class="btn-ghost-sm" href="${url}">Lees artikel</a>
            </div>
          </article>
        `;
      }
    

    function applyFilters(){
      const q = norm(articleSearchText.value);
      const c = safe(articleFilterCountry.value);
      const cat = safe(articleFilterCategory.value);

      const filtered = allItems.filter(a => {
        const text = norm((a.title||"") + " " + (a.snippet||"") + " " + (a.source||a.publisher||"") + " " + (a.category||"") + " " + (a.country||""));
        if (q && !text.includes(q)) return false;

        if (c) {
          const cc = safe(a.country || "");
          if (cc !== c) return false;
        }
        if (cat) {
          const ca = safe(a.category || "");
          if (ca !== cat) return false;
        }
        return true;
      });

      articleList.innerHTML = "";
      const countLabel = filtered.length ? (filtered.length + " artikels") : "0 artikels";
      newsCountTop.textContent = countLabel;
      newsCountTop2.textContent = countLabel;

      if (!filtered.length){
        newsStatus.style.display = "block";
        newsStatus.textContent = "Geen artikels gevonden met deze filters.";
        return;
      } else {
        newsStatus.style.display = "none";
      }

      filtered.forEach((a, i) => {
        articleList.insertAdjacentHTML("beforeend", renderCard(a));

        // In-feed ads
        if (i === 5) {
          articleList.insertAdjacentHTML("beforeend", renderAdInfeed("5761272101"));
          try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) {}
        }
        if (i === 13) {
          articleList.insertAdjacentHTML("beforeend", renderAdInfeed("4831226012"));
          try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) {}
        }
      });
    }

    async function loadNews(){
      try{
        const res = await fetch(NEWS_URL, { cache: "no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);

        const data = await res.json();
        allItems = Array.isArray(data?.items) ? data.items : [];

        // sort newest first
        allItems.sort((a,b) => {
          const da = new Date(a.publishedAt || a.date || 0).getTime();
          const db = new Date(b.publishedAt || b.date || 0).getTime();
          return db - da;
        });

        applyFilters();
      } catch (e) {
        articleList.innerHTML = "";
        newsCountTop.textContent = "â€”";
        newsCountTop2.textContent = "â€”";
        newsStatus.style.display = "block";
        newsStatus.textContent = "Kon artikels niet laden. Controleer /api/news en CORS.";
      }
    }

    articleSearchText.addEventListener("input", applyFilters);
    articleFilterCountry.addEventListener("change", applyFilters);
    articleFilterCategory.addEventListener("change", applyFilters);

    loadNews();
  </script>

  <script src="assets/js/nav-mobile.js"></script>
  <script src="assets/js/live-banner.js"></script>
</body>
</html>