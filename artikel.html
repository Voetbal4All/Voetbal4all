<!DOCTYPE html>
<html lang="nl">
<head>
  <!-- Google AdSense -->
  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4062633211824348"
    crossorigin="anonymous"></script>

  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <title id="page-title">Voetbal4All - Artikel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEO Meta Tags (dynamically filled) -->
  <meta name="description" id="meta-description" content="">
  <meta property="og:title" id="og-title" content="">
  <meta property="og:description" id="og-description" content="">
  <meta property="og:image" id="og-image" content="">
  <meta property="og:url" id="og-url" content="">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <!-- Hoofd-stylesheet -->
  <link rel="stylesheet" href="style.css?v=20251227a" />
  
  <style>
    /* Article-specific styles */
    .article-body {
      font-size: 1.1rem;
      line-height: 1.8;
      color: #333;
      margin: 24px 0;
    }
    
    .article-body p {
      margin-bottom: 1.2em;
    }
    
    .article-standfirst {
      font-size: 1.25rem;
      font-weight: 500;
      color: #555;
      margin: 16px 0 24px 0;
      line-height: 1.6;
      border-left: 4px solid var(--brand-primary, #1a5490);
      padding-left: 16px;
    }
    
    .article-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 24px 0;
    }
    
    .article-tag {
      background: #f0f0f0;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 0.9rem;
      color: #666;
    }
    
    .share-buttons {
      display: flex;
      gap: 12px;
      margin: 32px 0;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      flex-wrap: wrap;
    }
    
    .share-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 6px;
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .share-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .share-button--facebook { border-color: #1877f2; color: #1877f2; }
    .share-button--facebook:hover { background: #1877f2; color: white; }
    
    .share-button--twitter { border-color: #1da1f2; color: #1da1f2; }
    .share-button--twitter:hover { background: #1da1f2; color: white; }
    
    .share-button--whatsapp { border-color: #25d366; color: #25d366; }
    .share-button--whatsapp:hover { background: #25d366; color: white; }
    
    .share-button--linkedin { border-color: #0077b5; color: #0077b5; }
    .share-button--linkedin:hover { background: #0077b5; color: white; }
    
    .ad-slot {
      margin: 32px 0;
      padding: 24px;
      background: #f8f9fa;
      border: 1px dashed #ddd;
      border-radius: 8px;
      text-align: center;
      min-height: 250px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
    }
    
    .article-meta-info {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      align-items: center;
      margin: 16px 0;
      padding: 12px 0;
      border-bottom: 1px solid #eee;
      font-size: 0.95rem;
      color: #666;
    }
    
    .meta-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .meta-icon {
      font-size: 1.1em;
    }
  </style>
</head>

<body>
  <div class="page">
    
    <!-- NAVBAR (same as index.html) -->
    <header class="navbar">
      <div class="shell">
        <div class="navbar-inner">
          <a href="index.html" class="brand brand--logo-only">
            <img
              src="assets/img/brand/logo-voetbal4all.svg"
              alt="Voetbal4All"
              class="brand-logo"
              loading="eager"
            />
          </a>

          <nav class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="artikels.html" class="nav-link nav-link--active">Artikels</a>

            <!-- SPORTIEVE EVENTS -->
            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Sportieve events <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="events.html" class="nav-dropdown-link">Alle sportieve events</a>
                <a href="events.html?type=Tornooi" class="nav-dropdown-link">Tornooien</a>
                <a href="events.html?type=Vriendschappelijk" class="nav-dropdown-link">Vriendschappelijke wedstrijden</a>
                <a href="stages.html" class="nav-dropdown-link">Stages</a>
                <a href="events.html?type=Voetbalkamp" class="nav-dropdown-link">Voetbalkampen</a>
              </div>
            </div>

            <!-- CLUB & FUN -->
            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Club &amp; fun <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="algemene-events.html" class="nav-dropdown-link">Alle club &amp; fun events</a>
                <a href="dinners.html" class="nav-dropdown-link">Dinners &amp; eetdagen</a>
                <a href="algemene-events.html?type=Spelavond" class="nav-dropdown-link">Spelavonden &amp; acties</a>
                <a href="algemene-events.html?type=Fuif" class="nav-dropdown-link">Fuif / afterparty</a>
                <a href="algemene-events.html?type=Sponsor" class="nav-dropdown-link">Sponsor &amp; netwerk</a>
              </div>
            </div>

            <!-- VACATURES & PROFIELEN -->
            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Vacatures &amp; profielen <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="clubvacatures.html" class="nav-dropdown-link">Clubvacatures</a>
                <a href="trainers.html" class="nav-dropdown-link">Trainers</a>
                <a href="spelers.html" class="nav-dropdown-link">Spelers</a>
              </div>
            </div>

            <!-- SPORTIEF -->
            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Sportief <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="sportief-spelers.html" class="nav-dropdown-link">Spelersstatistieken</a>
                <a href="sportief-teams.html" class="nav-dropdown-link">Teamstatistieken</a>
                <a href="sportief-resultaten.html" class="nav-dropdown-link">Resultaten</a>
                <a href="sportief-rangschikkingen.html" class="nav-dropdown-link">Rangschikkingen</a>
              </div>
            </div>
          </nav>

          <!-- Mobile toggle -->
          <button class="navbar-toggler" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
      </div>
    </header>

    <!-- LIVE SCORES BANNER -->
    <div class="live-banner" id="live-banner" style="display:none;">
      <div class="shell">
        <div class="live-banner-inner">
          <span class="live-dot"></span>
          <span class="live-text">LIVE</span>
          <div class="live-matches" id="live-matches"></div>
        </div>
      </div>
    </div>

    <!-- BREADCRUMB -->
    <div class="shell" style="padding: 16px 0 0 0;">
      <nav class="breadcrumb" style="font-size: 0.9rem; color: #666;">
        <a href="index.html" style="color: inherit; text-decoration: none;">Home</a>
        <span style="margin: 0 8px;">‚Ä∫</span>
        <a href="artikels.html" style="color: inherit; text-decoration: none;">Artikels</a>
        <span style="margin: 0 8px;">‚Ä∫</span>
        <span id="breadcrumb-title" style="color: #333;">...</span>
      </nav>
    </div>

    <!-- MAIN CONTENT -->
    <main class="shell" style="padding:24px 0;">
      
      <!-- Error/Loading status -->
      <div id="article-status" style="margin:12px 0; padding: 16px; background: #fff3cd; border-left: 4px solid #ffc107; display:none; border-radius: 4px;">
        <strong>Let op:</strong> <span id="status-message"></span>
      </div>

      <!-- Article Container -->
      <div class="content-layout" style="display: grid; grid-template-columns: 1fr; gap: 32px; max-width: 1200px; margin: 0 auto;">
        
        <!-- Main Article -->
        <article class="card" style="padding: 32px;">
          
          <!-- Article Header -->
          <header>
            <h1 id="article-title" style="font-size: 2.2rem; line-height: 1.3; margin: 0 0 16px 0; color: #1a1a1a;">
              Artikel wordt geladen...
            </h1>
            
            <div class="article-meta-info">
              <div class="meta-item" id="meta-published">
                <span class="meta-icon">üìÖ</span>
                <span id="article-date">...</span>
              </div>
              <div class="meta-item" id="meta-country" style="display: none;">
                <span id="country-flag"></span>
                <span id="country-name"></span>
              </div>
              <div class="meta-item" id="meta-type" style="display: none;">
                <span class="meta-icon">üì∞</span>
                <span id="article-type"></span>
              </div>
            </div>
          </header>

          <!-- Featured Image -->
          <div id="article-image-container" style="margin: 24px 0; display: none;">
            <img id="article-image" alt="" style="width: 100%; max-height: 500px; object-fit: cover; border-radius: 12px;" />
          </div>

          <!-- Share Buttons (Top) -->
          <div class="share-buttons">
            <strong style="width: 100%; margin-bottom: 8px;">Deel dit artikel:</strong>
            <a href="#" id="share-facebook" class="share-button share-button--facebook" target="_blank" rel="noopener">
              <span>üìò</span> Facebook
            </a>
            <a href="#" id="share-twitter" class="share-button share-button--twitter" target="_blank" rel="noopener">
              <span>üê¶</span> Twitter/X
            </a>
            <a href="#" id="share-whatsapp" class="share-button share-button--whatsapp" target="_blank" rel="noopener">
              <span>üí¨</span> WhatsApp
            </a>
            <a href="#" id="share-linkedin" class="share-button share-button--linkedin" target="_blank" rel="noopener">
              <span>üíº</span> LinkedIn
            </a>
            <button id="share-copy" class="share-button" style="cursor: pointer; background: #fff; border: 1px solid #ddd;">
              <span>üîó</span> <span id="copy-text">Kopieer link</span>
            </button>
          </div>

          <!-- Standfirst (Lead paragraph) -->
          <div id="article-standfirst-container" style="display: none;">
            <p id="article-standfirst" class="article-standfirst"></p>
          </div>

          <!-- Article Body -->
          <div id="article-body" class="article-body">
            <p style="color: #999; text-align: center; padding: 40px 0;">Artikel wordt geladen...</p>
          </div>

          <!-- Tags -->
          <div id="article-tags-container" style="display: none;">
            <hr style="margin: 32px 0; border: none; border-top: 1px solid #eee;">
            <div>
              <strong style="display: block; margin-bottom: 12px;">Tags:</strong>
              <div id="article-tags" class="article-tags"></div>
            </div>
          </div>

          <!-- Ad Slot (In-Article) -->
          <div class="ad-slot">
            <div>
              <strong>Advertentieruimte</strong><br>
              <span style="font-size: 0.9rem;">728 √ó 90 px banner</span>
            </div>
          </div>

          <!-- Share Buttons (Bottom) -->
          <div class="share-buttons">
            <strong style="width: 100%; margin-bottom: 8px;">Was dit artikel interessant? Deel het!</strong>
            <a href="#" id="share-facebook-2" class="share-button share-button--facebook" target="_blank" rel="noopener">
              <span>üìò</span> Facebook
            </a>
            <a href="#" id="share-twitter-2" class="share-button share-button--twitter" target="_blank" rel="noopener">
              <span>üê¶</span> Twitter/X
            </a>
            <a href="#" id="share-whatsapp-2" class="share-button share-button--whatsapp" target="_blank" rel="noopener">
              <span>üí¨</span> WhatsApp
            </a>
          </div>

          <!-- Back to articles -->
          <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #eee;">
            <a href="artikels.html" class="btn" style="display:inline-block;">‚Üê Terug naar alle artikels</a>
          </div>

        </article>

        <!-- Sidebar Ad Slots (future) -->
        <!-- Can add 300x250 ad units here if needed -->

      </div>

      <!-- Related Articles (future enhancement) -->
      <!-- <section style="margin-top: 48px;">...</section> -->

    </main>

    <!-- FOOTER -->
    <footer class="footer">
      <div class="shell">
        <div class="footer-grid">
          
          <div class="footer-col">
            <div class="footer-brand">
              <img src="assets/img/brand/logo-voetbal4all.svg" alt="Voetbal4All" style="height: 40px; margin-bottom: 16px;">
            </div>
            <p style="opacity: 0.8; font-size: 0.95rem; line-height: 1.6;">
              Jouw platform voor voetbalnieuws, events, vacatures en meer uit Belgi√´ en Nederland.
            </p>
            <div style="margin-top: 16px; display: flex; gap: 12px;">
              <a href="https://www.facebook.com/profile.php?id=61571506114088" target="_blank" rel="noopener" style="color: inherit; font-size: 1.5rem;">üìò</a>
              <a href="https://www.instagram.com/voetbal4all.eu/" target="_blank" rel="noopener" style="color: inherit; font-size: 1.5rem;">üì∑</a>
            </div>
          </div>

          <div class="footer-col">
            <h4 class="footer-title">Navigatie</h4>
            <ul class="footer-links">
              <li><a href="index.html">Home</a></li>
              <li><a href="artikels.html">Artikels</a></li>
              <li><a href="events.html">Events</a></li>
              <li><a href="clubvacatures.html">Vacatures</a></li>
            </ul>
          </div>

          <div class="footer-col">
            <h4 class="footer-title">Informatie</h4>
            <ul class="footer-links">
              <li><a href="over-ons.html">Over ons</a></li>
              <li><a href="adverteren.html">Adverteren</a></li>
              <li><a href="contact.html">Contact</a></li>
              <li><a href="privacy.html">Privacy</a></li>
            </ul>
          </div>

          <div class="footer-col">
            <h4 class="footer-title">Contact</h4>
            <p style="opacity: 0.8; font-size: 0.95rem;">
              Email: <a href="mailto:info@voetbal4all.eu" style="color: inherit; text-decoration: underline;">info@voetbal4all.eu</a>
            </p>
          </div>

        </div>

        <div class="footer-bottom">
          <p style="opacity: 0.7; font-size: 0.9rem;">
            ¬© 2025 Voetbal4All. Alle rechten voorbehouden.
          </p>
        </div>
      </div>
    </footer>

  </div>

  <script>
    (function () {
      const API_BASE = "https://voetbal4all-backend-database.onrender.com";
      const SITE_URL = "https://voetbal4all.eu";

      // Get article file from URL
      const qs = new URLSearchParams(location.search);
      const file = qs.get("file");

      // Elements
      const statusEl = document.getElementById("article-status");
      const statusMessage = document.getElementById("status-message");
      const titleEl = document.getElementById("article-title");
      const metaDateEl = document.getElementById("article-date");
      const imgContainer = document.getElementById("article-image-container");
      const imgEl = document.getElementById("article-image");
      const standfirstContainer = document.getElementById("article-standfirst-container");
      const standfirstEl = document.getElementById("article-standfirst");
      const bodyEl = document.getElementById("article-body");
      const tagsContainer = document.getElementById("article-tags-container");
      const tagsEl = document.getElementById("article-tags");
      const breadcrumbTitle = document.getElementById("breadcrumb-title");

      // Country meta
      const metaCountry = document.getElementById("meta-country");
      const countryFlag = document.getElementById("country-flag");
      const countryName = document.getElementById("country-name");

      // Type meta
      const metaType = document.getElementById("meta-type");
      const articleType = document.getElementById("article-type");

      function showErr(msg) {
        statusEl.style.display = "block";
        statusMessage.textContent = msg;
        bodyEl.innerHTML = "";
      }

      function hideErr() {
        statusEl.style.display = "none";
      }

      if (!file) {
        showErr("Geen artikel gekozen. Ga terug naar de artikelpagina en kies een artikel.");
        return;
      }

      // Fetch article
      const url = `${API_BASE}/api/news/${encodeURIComponent(file)}`;

      fetch(url, { cache: "no-store" })
        .then(r => {
          if (!r.ok) throw new Error(`HTTP ${r.status}`);
          return r.json();
        })
        .then(data => {
          if (!data || data.ok === false) {
            throw new Error(data?.error || "Artikel niet gevonden");
          }

          const article = data.item || data.article || data;

          // Title
          const title = article.title || "Voetbalnieuws";
          titleEl.textContent = title;
          document.getElementById("page-title").textContent = `${title} - Voetbal4All`;
          breadcrumbTitle.textContent = title.length > 40 ? title.slice(0, 40) + "..." : title;

          // Meta tags for SEO/sharing
          const description = article.standfirst || article.snippet || title;
          document.getElementById("meta-description").content = description;
          document.getElementById("og-title").content = title;
          document.getElementById("og-description").content = description;
          
          // Published date
          if (article.publishedAt) {
            const date = new Date(article.publishedAt);
            metaDateEl.textContent = date.toLocaleDateString("nl-BE", {
              year: "numeric",
              month: "long",
              day: "numeric",
              hour: "2-digit",
              minute: "2-digit"
            });
          }

          // Country flag
          const country = (article.country || "").toUpperCase();
          if (country) {
            const flagEmoji = country === "BE" ? "üáßüá™" : country === "NL" ? "üá≥üá±" : "üåç";
            const countryText = country === "BE" ? "Belgi√´" : country === "NL" ? "Nederland" : "Internationaal";
            countryFlag.textContent = flagEmoji;
            countryName.textContent = countryText;
            metaCountry.style.display = "flex";
          }

          // Article type (merged vs single)
          if (article._meta?.type === "merged") {
            articleType.textContent = `Samengevoegd artikel (${article._meta.sourceCount || 0} bronnen)`;
            metaType.style.display = "flex";
          }

          // Image
          const imgPath = typeof article.image === "string" ? article.image : null;
          if (imgPath) {
            const imgSrc = imgPath.startsWith("http") ? imgPath : `${API_BASE}${imgPath}`;
            imgEl.src = imgSrc;
            imgEl.alt = title;
            imgContainer.style.display = "block";
            document.getElementById("og-image").content = imgSrc;
          }

          // Standfirst (lead paragraph)
          if (article.standfirst) {
            standfirstEl.textContent = article.standfirst;
            standfirstContainer.style.display = "block";
          }

          // Body - CRITICAL FIX: Show full body, not just snippet!
          const body = article.body || article.content || article.snippet || "";
          if (body) {
            // Convert plain text to paragraphs
            const paragraphs = body.split("\n\n").filter(p => p.trim());
            bodyEl.innerHTML = paragraphs.map(p => `<p>${p.trim()}</p>`).join("");
          } else {
            bodyEl.innerHTML = "<p><em>Geen inhoud beschikbaar.</em></p>";
          }

          // Tags
          if (Array.isArray(article.tags) && article.tags.length > 0) {
            tagsEl.innerHTML = article.tags
              .map(tag => `<span class="article-tag">${tag}</span>`)
              .join("");
            tagsContainer.style.display = "block";
          }

          // Setup share buttons
          const articleUrl = `${SITE_URL}/artikel.html?file=${encodeURIComponent(file)}`;
          const shareTitle = encodeURIComponent(title);
          const shareText = encodeURIComponent(`${title} - via Voetbal4All`);

          document.getElementById("og-url").content = articleUrl;

          // Facebook
          const fbUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(articleUrl)}`;
          document.getElementById("share-facebook").href = fbUrl;
          document.getElementById("share-facebook-2").href = fbUrl;

          // Twitter/X
          const twitterUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(articleUrl)}&text=${shareText}`;
          document.getElementById("share-twitter").href = twitterUrl;
          document.getElementById("share-twitter-2").href = twitterUrl;

          // WhatsApp
          const waUrl = `https://wa.me/?text=${shareText}%20${encodeURIComponent(articleUrl)}`;
          document.getElementById("share-whatsapp").href = waUrl;
          document.getElementById("share-whatsapp-2").href = waUrl;

          // LinkedIn
          const liUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(articleUrl)}`;
          document.getElementById("share-linkedin").href = liUrl;

          // Copy link button
          document.getElementById("share-copy").addEventListener("click", async function(e) {
            e.preventDefault();
            try {
              await navigator.clipboard.writeText(articleUrl);
              const copyText = document.getElementById("copy-text");
              const original = copyText.textContent;
              copyText.textContent = "‚úì Gekopieerd!";
              setTimeout(() => { copyText.textContent = original; }, 2000);
            } catch (err) {
              alert("Kon link niet kopi√´ren. URL: " + articleUrl);
            }
          });

          hideErr();
        })
        .catch(e => {
          console.error("ARTICLE FETCH ERROR:", e);
          showErr(`Artikel kon niet geladen worden: ${e?.message || e}`);
        });

      // DEEP LINK PROTECTION (only allow opens from Facebook/Instagram or voetbal4all.eu)
      const referrer = document.referrer.toLowerCase();
      const hostname = window.location.hostname.toLowerCase();
      
      const allowedReferrers = ['facebook.com', 'instagram.com', 't.co', 'linkedin.com'];
      const isAllowedReferrer = allowedReferrers.some(domain => referrer.includes(domain));
      const isOwnSite = hostname.includes('voetbal4all.eu') || hostname.includes('localhost');
      
      if (!isOwnSite && !isAllowedReferrer && referrer !== '') {
        // External site trying to embed/open article - redirect to main site
        const targetUrl = `${SITE_URL}/artikel.html${location.search}`;
        if (window.location.href !== targetUrl) {
          window.location.replace(targetUrl);
        }
      }
    })();
  </script>

  <!-- Belangrijk: scripts maar 1x, en pas NA de HTML -->
  <script src="assets/js/nav-mobile.js" defer></script>
  <script src="assets/js/live-banner.js" defer></script>
</body>
</html>
