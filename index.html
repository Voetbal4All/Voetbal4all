<!DOCTYPE html>
<html lang="nl">
<head>
  <!-- Google AdSense -->
  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4062633211824348"
    crossorigin="anonymous"></script>

  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <title>Voetbal4All - Home</title>
  <link rel="canonical" href="https://www.voetbal4all.eu/">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <!-- Hoofd-stylesheet -->
  <link rel="stylesheet" href="style.css?v=20251227a" />

  <!-- Redirect: /index.html -> / -->
  <script>
    if (location.pathname.endsWith("/index.html")) {
      location.replace("/");
    }
  </script>
</head>

<body>
  <div class="page">

    <!-- NAVBAR -->
    <header class="navbar">
      <div class="shell">
        <div class="navbar-inner">
          <a href="index.html" class="brand brand--logo-only">
            <img
              src="assets/img/brand/logo-voetbal4all.svg"
              alt="Voetbal4All"
              class="brand-logo"
              loading="eager"
            />
          </a>

          <nav class="nav-links">
            <a href="index.html" class="nav-link nav-link--active">Home</a>
            <a href="artikels.html" class="nav-link">Artikels</a>

            <!-- SPORTIEVE EVENTS -->
            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Sportieve events <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="events.html" class="nav-dropdown-link">Alle sportieve events</a>
                <a href="events.html?type=Tornooi" class="nav-dropdown-link">Tornooien</a>
                <a href="events.html?type=Vriendschappelijk" class="nav-dropdown-link">Vriendschappelijke wedstrijden</a>
                <a href="stages.html" class="nav-dropdown-link">Stages</a>
                <a href="events.html?type=Voetbalkamp" class="nav-dropdown-link">Voetbalkampen</a>
              </div>
            </div>

            <!-- CLUB & FUN -->
            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Club &amp; fun <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="algemene-events.html" class="nav-dropdown-link">Alle club &amp; fun events</a>
                <a href="dinners.html" class="nav-dropdown-link">Dinners &amp; eetdagen</a>
                <a href="algemene-events.html?type=Spelavond" class="nav-dropdown-link">Spelavonden &amp; acties</a>
                <a href="algemene-events.html?type=Fuif" class="nav-dropdown-link">Fuif / afterparty</a>
                <a href="algemene-events.html?type=Sponsor" class="nav-dropdown-link">Sponsor &amp; netwerk</a>
              </div>
            </div>

            <!-- VACATURES & PROFIELEN -->
            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Vacatures &amp; profielen <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="clubvacatures.html" class="nav-dropdown-link">Clubvacatures</a>
                <a href="trainers.html" class="nav-dropdown-link">Trainers</a>
                <a href="spelers.html" class="nav-dropdown-link">Spelers</a>
              </div>
            </div>

            <!-- SPORTIEF -->
            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Sportief <span class="nav-link-caret">‚ñæ</span>
              </button>
              <div class="nav-dropdown">
                <a href="sportief-spelers.html" class="nav-dropdown-link">Spelersstatistieken</a>
                <a href="sportief-teams.html" class="nav-dropdown-link">Teamstatistieken</a>
                <a href="sportief-resultaten.html" class="nav-dropdown-link">Resultaten</a>
                <a href="sportief-rangschikkingen.html" class="nav-dropdown-link">Rangschikkingen</a>
              </div>
            </div>
          </nav>

          <button class="nav-toggle" type="button" aria-label="Open menu">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>

        </div>
      </div>
    </header>

    <!-- LIVE BANNER (PLACEHOLDER) -->
    <div id="live-banner"></div>

    <!-- MAIN -->
    <main class="main">
      <!-- HERO: Live scores + topwedstrijd -->
      <section class="banner" id="banner-hero">
        <div class="shell">
          <div class="banner-inner">
            <div class="banner-content">
              <div class="banner-eyebrow">Ontdek meer</div>
              <h1 class="banner-title">Voetbal4All</h1>
              <p class="banner-text">Alle voetbalartikels, resultaten, evenementen en vacatures verzameld.</p>
              <div class="banner-buttons">
                <a href="artikels.html" class="btn btn--cta">Bekijk alle artikels</a>
                <a href="#footer-contact" class="btn btn--secondary">Adverteer nu</a>
              </div>
            </div>
            <div class="banner-image">
              <img src="assets/img/content/herobeeld-voetbal.webp" alt="Voetbal4All" class="hero-img" loading="eager" />
            </div>
          </div>
        </div>
      </section>

      <section class="content">
        <div class="shell shell--wide">

          <div class="grid-layout">

            <!-- LINKS: PREMIUM EVENTS -->
            <aside class="column-left">
              <article class="card">
                <div class="card-header">
                  <div>
                    <div class="card-caption">Premium</div>
                    <div class="card-title">In de kijker</div>
                  </div>
                  <span class="pill-small">Roterend elke 5 sec</span>
                </div>

                <ul class="events-list" id="premium-events-list">
                  <li class="event-item">
                    <div class="event-title">‚ö° Uw evenement hier?</div>
                    <div class="event-meta">Bereik 1000+ bezoekers per dag met Premium-plaatsing.</div>
                    <a href="#footer-contact" class="event-link">Meer info ‚Üí</a>
                  </li>
                  <li class="event-item">
                    <div class="event-title">‚ö° Uw evenement hier?</div>
                    <div class="event-meta">Bereik 1000+ bezoekers per dag met Premium-plaatsing.</div>
                    <a href="#footer-contact" class="event-link">Meer info ‚Üí</a>
                  </li>
                </ul>
              </article>

              <div class="ad-vertical" style="margin-top:12px;">
                <ins class="adsbygoogle"
                  style="display:block"
                  data-ad-client="ca-pub-4062633211824348"
                  data-ad-slot="6032627042"
                  data-ad-format="auto"
                  data-full-width-responsive="true"></ins>
                <script>
                  (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
              </div>

              <article class="card" style="margin-top:12px;">
                <div class="card-header">
                  <div>
                    <div class="card-caption">Nieuw</div>
                    <div class="card-title">Laatste clubvacatures</div>
                  </div>
                  <span class="pill-small">Laatste 10, roterend</span>
                </div>

                <ul class="events-list" id="latest-vacatures-list">
                  <li class="event-item">
                    <div class="event-title">Hoofdtrainer U16 gezocht</div>
                    <div class="event-meta">Regio West-Vlaanderen ¬∑ minimaal UEFA B.</div>
                  </li>
                  <li class="event-item">
                    <div class="event-title">Keeperstrainer eerste ploeg</div>
                    <div class="event-meta">Regio Antwerpen ¬∑ nationale reeks.</div>
                  </li>
                </ul>

                <a href="clubvacatures.html" class="event-link">Bekijk alle vacatures ‚Üí</a>
              </article>
            </aside>

            <!-- MIDDEN: ARTIKELS -->
            <section class="column-middle">
              <div class="card" style="margin-bottom:12px;">
                <div class="card-header">
                  <div>
                    <div class="card-caption">In de kijker</div>
                    <div class="card-title">Laatste artikels &amp; verhalen</div>
                  </div>
                  <span class="pill-small">Met kleine foto links</span>
                </div>
                <p class="note">
                  Compacte artikels met kleine afbeeldingen links van de tekst. Grotere beelden komen op de artikelpagina zelf.
                </p>
              </div>

              <div id="latest-news-grid" class="article-list"></div>
              <p id="latest-news-status" class="note" style="display:none;"></p>
            </section>

            <!-- RECHTS -->
            <aside class="column-right">
              <article class="card">
                <div class="card-header">
                  <div>
                    <div class="card-caption">Nieuw</div>
                    <div class="card-title">Laatst aangemelde trainers</div>
                  </div>
                  <span class="pill-small">Laatste 10, roterend</span>
                </div>

                <ul class="events-list" id="latest-trainers-list">
                  <li class="event-item">
                    <div class="event-title">Trainer U13 ¬∑ Provinciaal</div>
                    <div class="event-meta">Regio Vlaams-Brabant ¬∑ beschikbaar vanaf volgend seizoen.</div>
                  </li>
                  <li class="event-item">
                    <div class="event-title">Assistent-trainer onderbouw</div>
                    <div class="event-meta">Regio Kempen ¬∑ inzetbaar 2 avonden per week.</div>
                  </li>
                </ul>

                <a href="trainers.html" class="event-link">Bekijk alle trainers ‚Üí</a>
              </article>

              <article class="card" style="margin-top:14px;">
                <div class="card-header">
                  <div>
                    <div class="card-caption">Nieuw</div>
                    <div class="card-title">Laatst aangemelde spelers</div>
                  </div>
                  <span class="pill-small">Laatste 10, roterend</span>
                </div>

                <ul class="events-list" id="latest-players-list">
                  <li class="event-item">
                    <div class="event-title">Aanvallende middenvelder U14</div>
                    <div class="event-meta">Regio Antwerpen ¬∑ zoekt club met sterke opleiding.</div>
                  </li>
                  <li class="event-item">
                    <div class="event-title">Doelman U16</div>
                    <div class="event-meta">Regio Limburg ¬∑ zoekt meer speeltijd op provinciaal niveau.</div>
                  </li>
                </ul>

                <a href="spelers.html" class="event-link">Bekijk alle spelers ‚Üí</a>
              </article>

              <div class="ad-vertical" style="margin-top:12px;">
                <ins class="adsbygoogle"
                  style="display:block"
                  data-ad-client="ca-pub-4062633211824348"
                  data-ad-slot="6032627042"
                  data-ad-format="auto"
                  data-full-width-responsive="true"></ins>
                <script>
                  (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
              </div>
            </aside>

          </div>
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer" id="footer-contact">
      <div class="shell">
        <div class="footer-grid">
          <div class="footer-brand">
            <div>Voetbal4All ¬∑ voor spelers, ouders, trainers en clubs.</div>
            <div class="footer-legal">
              &copy; <span id="year"></span> Voetbal4All. Alle rechten voorbehouden.
              ¬∑ Mogelijkheden voor hoofdsponsor, partners en advertenties.
            </div>
            <div class="footer-social">
              <a href="https://www.facebook.com/voetbal4all" target="_blank" class="footer-social-link">Facebook</a>
              <a href="https://www.instagram.com/voetbal4all" target="_blank" class="footer-social-link">Instagram</a>
            </div>
          </div>

          <div class="footer-nav">
            <strong>Navigatie</strong>
            <a href="index.html">Home</a>
            <a href="artikels.html">Artikels</a>
            <a href="events.html">Sportieve events</a>
            <a href="algemene-events.html">Club &amp; fun</a>
          </div>

          <div class="footer-nav">
            <strong>Vacatures &amp; profielen</strong>
            <a href="clubvacatures.html">Clubvacatures</a>
            <a href="trainers.html">Trainers</a>
            <a href="spelers.html">Spelers</a>
          </div>

          <div class="footer-nav">
            <strong>Sportief</strong>
            <a href="sportief-spelers.html">Spelersstatistieken</a>
            <a href="sportief-teams.html">Teamstatistieken</a>
            <a href="sportief-resultaten.html">Resultaten</a>
            <a href="sportief-rangschikkingen.html">Rangschikkingen</a>
          </div>
        </div>
      </div>
    </footer>

  </div>

  <script>
    // JS voor dynamic year in footer
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

  <script>
    // Script voor premium events
    document.addEventListener("DOMContentLoaded", () => {
      const list = document.getElementById("premium-events-list");
      if (!list) return;
      const items = Array.from(list.querySelectorAll(".event-item"));

      if (items.length === 0) {
        const msg = document.createElement("p");
        msg.className = "note";
        msg.textContent = "Uw profiel / event / vacature hier? Druk op de knop voor extra zichtbaarheid.";
        list.parentElement.appendChild(msg);
        return;
      }

      if (items.length > 2) {
        let index = 0;
        function renderPremium() {
          items.forEach((item, i) => {
            item.style.display = (i === index || i === (index + 1) % items.length) ? "" : "none";
          });
          index = (index + 2) % items.length;
        }
        renderPremium();
        setInterval(renderPremium, 5000);
      }
    });
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const homeListEl = document.getElementById("latest-news-grid");
      const homeStatusEl = document.getElementById("latest-news-status");

      if (!homeListEl) {
        console.error("Container #latest-news-grid niet gevonden");
        return;
      }

      const API_BASE = "https://voetbal4all-backend-database.onrender.com";
      const IMG_BASE = "https://voetbal4all-backend-database.onrender.com";
      const CACHE_KEY = "home_news_html_v5"; // Updated cache version
      localStorage.removeItem(CACHE_KEY);
      const REFRESH_MS = 5 * 60 * 1000; // 5 min

      let hasRenderedHomeNews = false;

      function showStatusOnceIfEmpty(msg) {
        if (!hasRenderedHomeNews && homeStatusEl) {
          homeStatusEl.style.display = "block";
          homeStatusEl.textContent = msg;
        }
      }

      function hideStatus() {
        if (homeStatusEl) homeStatusEl.style.display = "none";
      }

      // 1) Toon cache onmiddellijk (sneller), maar blijf daarna live ophalen
      const cachedHtml = localStorage.getItem(CACHE_KEY);
      if (cachedHtml && !homeListEl.innerHTML.trim()) {
        homeListEl.innerHTML = cachedHtml;
        hasRenderedHomeNews = true;
        hideStatus();
      }
      
      async function loadHomeNews() {
        try {
          // üî• FIX 1: Load 50 articles instead of 6 (for better distribution)
          const url = `${API_BASE}/api/news?limit=50&ts=${Date.now()}`;
          const res = await fetch(url, { cache: "no-store" });
          console.log("[HOME] fetch", url, "->", res.status);

          if (!res.ok) throw new Error("[HOME] API error: " + res.status);

          const ct = res.headers.get("content-type") || "";
          if (!ct.includes("application/json")) {
            const txt = await res.text();
            throw new Error("[HOME] Expected JSON, got: " + ct + " / " + txt.slice(0, 200));
          }

          const data = await res.json();
          const rawItems = Array.isArray(data.items) ? data.items : [];

          // DEDUPE: eerst op fileName, fallback op title+publishedAt
          const seen = new Set();
          let items = rawItems.filter(a => {
            const key =
              (a && a.fileName) ? `f:${a.fileName}` :
              `t:${(a?.title || "").trim().toLowerCase()}|p:${a?.publishedAt || ""}`;

            if (seen.has(key)) return false;
            seen.add(key);
            return true;
          });

          // üî• FIX 2: FOOTBALL FILTER - Remove non-football content
          const footballKeywords = [
            'voetbal', 'football', 'club', 'speler', 'doelpunt', 'wedstrijd',
            'match', 'trainer', 'competitie', 'league', 'transfer', 'ajax',
            'feyenoord', 'psv', 'anderlecht', 'club brugge', 'standard',
            'premier league', 'eredivisie', 'jupiler pro league', 'champions league',
            'europa league', 'world cup', 'fifa', 'uefa', 'goal', 'goalkeeper',
            'striker', 'midfielder', 'defender', 'penalty', 'corner', 'offside'
          ];
          
          const nonFootballKeywords = [
            'darts', 'dart', 'snooker', 'tennis', 'basketbal', 'hockey',
            'handbal', 'volleybal', 'formule 1', 'f1', 'wielrennen', 'cycling',
            'schaatsen', 'zwemmen', 'atletiek', 'golf', 'rugby'
          ];
          
          const filteredItems = items.filter(article => {
            const text = `${article.title || ''} ${article.snippet || ''}`.toLowerCase();
            
            // Exclude non-football sports immediately
            if (nonFootballKeywords.some(keyword => text.includes(keyword))) {
              console.log(`[FILTER] ‚ùå Excluded (non-football): ${article.title}`);
              return false;
            }
            
            // Include if contains football keywords
            const isFootball = footballKeywords.some(keyword => text.includes(keyword));
            if (!isFootball) {
              console.log(`[FILTER] ‚ùå Excluded (no football keywords): ${article.title}`);
            }
            return isFootball;
          });

          console.log(`[FILTER] ${items.length} ‚Üí ${filteredItems.length} articles (after football filter)`);

          // Take first 6 for display on homepage
          const renderItems = filteredItems.slice(0, 6);
          console.log("[HOME] items to render:", renderItems.length);

          // ‚ùóBij 0 items: NIET wissen als er al iets gerenderd is
          if (!renderItems.length) {
            showStatusOnceIfEmpty("Artikels worden geladen‚Ä¶");
            return;
          }

          const html = renderItems.map(a => {
            // 1) title check
            const rawTitle = a?.title || "";
            const looksLikeSlug =
              rawTitle.endsWith(".json") ||
              (rawTitle.length > 40 && rawTitle.split("-").length >= 6);

            const displayTitle = (!rawTitle || looksLikeSlug) ? "Nieuwsartikel" : rawTitle;
            const safeTitle = String(displayTitle).replace(/"/g, "&quot;");

            // 2) JUISTE file-naam (backend gebruikt fileName)
            const file = a?.file || a?.fileName || "";

            // 3) vlag op basis van country
            const country = (a?.country || "").toUpperCase();
            const flag =
              country === "BE" ? "üáßüá™" :
              country === "NL" ? "üá≥üá±" :
              country ? "üåç" : "";

            // 4) JUISTE image: backend levert image als STRING
            let imgPath = (typeof a?.image === "string" ? a.image : "") || "";

            // maak absoluut (belangrijk: IMG_BASE, niet API_BASE)
            if (imgPath && imgPath.startsWith("/")) {
              imgPath = IMG_BASE + imgPath;
            }
              
            return `
              <article class="home-news__item">
                <a class="home-news__link" href="artikel.html?file=${encodeURIComponent(file)}">
                  <div class="home-news__thumbWrap">
                    ${imgPath ? `<img class="home-news__thumb" src="${imgPath}" alt="${safeTitle}" loading="lazy">` : ``}
                  </div>
                  <div class="home-news__meta">
                    <div class="home-news__titleRow">
                      <span class="home-news__flag">${flag}</span>
                      <h4 class="home-news__title">${safeTitle}</h4>
                    </div>
                  </div>
                </a>
              </article>
            `;
          }).join("");

          homeListEl.innerHTML = html;

          // ‚úÖ pas NA succesvol renderen
          hasRenderedHomeNews = true;
          hideStatus();
          localStorage.setItem(CACHE_KEY, html);
        } catch (e) {
          console.error("[HOME] loadHomeNews error:", e);
          // Alleen status tonen als er nog nooit iets getoond is
          if (!hasRenderedHomeNews) {
            showStatusOnceIfEmpty("Nieuws laden mislukt.");
          }
        }
      }

      // Eerste live load + periodieke refresh
      loadHomeNews();
      setInterval(loadHomeNews, REFRESH_MS);
    });
  </script>

  <!-- Belangrijk: scripts maar 1x, en pas NA de HTML -->
  <script src="assets/js/nav-mobile.js" defer></script>
  <script src="assets/js/live-banner.js"></script>
</body>
</html>
