<!DOCTYPE html>
<html lang="nl">
<head>
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4062633211824348"
    crossorigin="anonymous"></script>

  <meta charset="UTF-8" />
  <title>Voetbal4All - Event</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts + CSS -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Green share buttons (Stripe-success inspired) */
    .share-green { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .share-green .share-a {
      display:inline-flex; align-items:center; justify-content:center;
      width:40px; height:40px; border-radius:10px;
      background:#16a34a; color:#fff; border:0; cursor:pointer;
      font-weight:700; line-height:1; text-decoration:none;
    }
    .share-green .share-a:hover { filter: brightness(0.95); }
    .share-green .share-hint { margin-left:6px; }

    /* Media gallery */
    .ev-media { margin-top:12px; }
    .ev-media-grid { display:flex; gap:10px; flex-wrap:wrap; }
    .ev-media-thumb {
      width:140px; height:98px; object-fit:cover; border-radius:10px;
      cursor:pointer; border:1px solid rgba(255,255,255,0.08);
    }

    /* Lightbox */
    .lightbox { position:fixed; inset:0; background:rgba(0,0,0,0.8); display:none; z-index:9999; }
    .lightbox.is-open { display:flex; align-items:center; justify-content:center; padding:20px; }
    .lightbox-inner { max-width:1100px; width:100%; }
    .lightbox-img { width:100%; height:auto; border-radius:12px; display:block; }
    .lightbox-actions { display:flex; justify-content:flex-end; margin-bottom:10px; }
    .lightbox-close {
      background:#16a34a; color:#fff; border:0; border-radius:10px; padding:10px 14px;
      cursor:pointer; font-weight:700;
    }
  </style>
</head>

<body class="v4-hide-live-mobile">
  <div class="page">

    <!-- NAVBAR (zelfde structuur als events.html) -->
    <header class="navbar">
      <div class="shell">
        <div class="navbar-inner">

          <a href="index.html" class="brand brand--logo-only">
            <img
              src="assets/img/brand/logo-voetbal4all.svg"
              alt="Voetbal4All"
              class="brand-logo"
              loading="eager"
            />
          </a>

          <nav class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="artikels.html" class="nav-link">Artikels</a>

            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Sportieve events <span class="nav-link-caret">▾</span>
              </button>
              <div class="nav-dropdown">
                <a href="events.html" class="nav-dropdown-link">Alle sportieve events</a>
                <a href="events.html?type=Tornooi" class="nav-dropdown-link">Tornooien</a>
                <a href="events.html?type=Vriendschappelijk" class="nav-dropdown-link">Vriendschappelijke wedstrijden</a>
                <a href="stages.html" class="nav-dropdown-link">Stages</a>
                <a href="events.html?type=Voetbalkamp" class="nav-dropdown-link">Voetbalkampen</a>
              </div>
            </div>

            <div class="nav-item nav-item--dropdown">
              <button class="nav-link nav-link--dropdown">
                Club &amp; fun <span class="nav-link-caret">▾</span>
              </button>
              <div class="nav-dropdown">
                <a href="algemene-events.html" class="nav-dropdown-link">Alle club &amp; fun events</a>
                <a href="dinners.html" class="nav-dropdown-link">Dinners &amp; eetdagen</a>
                <a href="algemene-events.html?type=Spelavond" class="nav-dropdown-link">Spelavonden &amp; acties</a>
                <a href="algemene-events.html?type=Fuif" class="nav-dropdown-link">Fuif / afterparty</a>
                <a href="algemene-events.html?type=Sponsor" class="nav-dropdown-link">Sponsor &amp; netwerk</a>
              </div>
            </div>

            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Vacatures &amp; profielen <span class="nav-link-caret">▾</span>
              </button>
              <div class="nav-dropdown">
                <a href="clubvacatures.html" class="nav-dropdown-link">Clubvacatures</a>
                <a href="trainers.html" class="nav-dropdown-link">Trainers</a>
                <a href="spelers.html" class="nav-dropdown-link">Spelers</a>
              </div>
            </div>

            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Sportief <span class="nav-link-caret">▾</span>
              </button>
              <div class="nav-dropdown">
                <a href="sportief-spelers.html" class="nav-dropdown-link">Spelersstatistieken</a>
                <a href="sportief-teams.html" class="nav-dropdown-link">Teamstatistieken</a>
                <a href="sportief-resultaten.html" class="nav-dropdown-link">Resultaten</a>
                <a href="sportief-rangschikkingen.html" class="nav-dropdown-link">Rangschikkingen</a>
                <a href="sportief-teams-in-de-kijker.html" class="nav-dropdown-link">Team/Medewerker in de kijker</a>
                <a href="sportief-supportersclubs.html" class="nav-dropdown-link">Supportersclubs</a>
              </div>
            </div>

            <div class="nav-item nav-item--dropdown">
              <button type="button" class="nav-link nav-link--dropdown">
                Voetbal4All <span class="nav-link-caret">▾</span>
              </button>
              <div class="nav-dropdown">
                <a href="gebruiksvoorwaarden.html" class="nav-dropdown-link">Gebruiksvoorwaarden</a>
                <a href="privacyverklaring.html" class="nav-dropdown-link">Privacyverklaring</a>
                <a href="contact.html" class="nav-dropdown-link">Contact</a>
              </div>
            </div>
          </nav>

          <a href="adverteren.html" class="nav-cta">
            <span>Adverteer nu</span>
            <span>Sponsor &amp; Ads</span>
          </a>

          <button class="nav-burger" aria-label="Menu">☰</button>
        </div>
      </div>
    </header>

    <!-- LIVE BANNER -->
    <section class="live-banner-top">
      <div class="shell">
        <div class="live-banner">
          <div class="live-label">
            <span class="live-dot"></span>
            Live resultaten
          </div>
          <div class="live-text">
            <span class="live-text-main"></span>
            <div class="live-updated"></div>
          </div>
          <div class="live-socials" aria-label="Volg Voetbal4All op social media">
            <div class="live-socials-label">Volg ons</div>
            <div class="live-socials-icons"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- AD: Top placement (responsive) -->
    <section class="section-main" style="padding-top:10px; padding-bottom:0;">
      <div class="shell">
        <div class="footer-ad" style="margin-bottom:12px;">
          <!-- Google AdSense unit (set your slot id) -->
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-4062633211824348"
               data-ad-slot="REPLACE_WITH_SLOT_TOP"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>
            try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch(e) {}
          </script>
        </div>
      </div>
    </section>

    <main>
      <section class="section-main" style="padding-top:10px;">
        <div class="shell">

          <div class="card" style="margin-bottom:12px;">
            <div class="card-header">
              <div>
                <div class="card-caption">Event detail</div>
                <div class="card-title" id="ev-title">Event</div>
              </div>
              <span class="pill-small" id="ev-pill">Sportieve events</span>
            </div>

            <p class="note" id="ev-meta" style="margin-top:6px;"></p>

            <!-- AD: In-card placement (above content) -->
            <div class="footer-ad" style="margin-top:10px;">
              <ins class="adsbygoogle"
                   style="display:block"
                   data-ad-client="ca-pub-4062633211824348"
                   data-ad-slot="REPLACE_WITH_SLOT_INCARD_1"
                   data-ad-format="auto"
                   data-full-width-responsive="true"></ins>
              <script>
                try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch(e) {}
              </script>
            </div>

            <div id="ev-premium" style="display:none; margin-top:10px;">
              <span class="pill-small">Premium</span>
            </div>

            <div class="ad-card-actions" style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
              <a href="events.html" class="btn-ghost-sm">← Terug naar events</a>

              <div class="share-green" aria-label="Deel dit event">
                <a class="share-a" id="share-fb" href="#" target="_blank" rel="noopener noreferrer" aria-label="Deel op Facebook">f</a>
                <a class="share-a" id="share-wa" href="#" target="_blank" rel="noopener noreferrer" aria-label="Deel via WhatsApp">WA</a>
                <a class="share-a" id="share-x"  href="#" target="_blank" rel="noopener noreferrer" aria-label="Deel op X">X</a>
                <a class="share-a" id="share-copy" href="#" aria-label="Kopieer link">⧉</a>
                <span class="note share-hint" style="margin:0;">Delen</span>
              </div>

              <button type="button" class="btn-ghost-sm" id="ev-contact">Inschrijven / contact</button>
            </div>

            <div class="ad-card-body" style="margin-top:12px;">
              <!-- Flyer / foto's (klik om te vergroten) -->
              <div class="ev-media" id="ev-media" style="display:none;">
                <div class="note" style="margin:0 0 8px 0;">Flyer / foto's</div>
                <div class="ev-media-grid" id="ev-media-grid"></div>
              </div>

              <!-- Details -->
              <div id="ev-desc"></div>
              <div id="ev-extra" style="margin-top:10px;"></div>

              <!-- AD: In-card placement (below content) -->
              <div class="footer-ad" style="margin-top:12px;">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-4062633211824348"
                     data-ad-slot="REPLACE_WITH_SLOT_INCARD_2"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                  try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch(e) {}
                </script>
              </div>
            </div>

            <p id="ev-status" class="note" style="margin-top:10px; display:none;"></p>
          </div>

        </div>
      </section>
    </main>

    
    <!-- AD: Bottom placement (responsive) -->
    <section class="section-main" style="padding-top:0; padding-bottom:10px;">
      <div class="shell">
        <div class="footer-ad" style="margin-top:12px;">
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-4062633211824348"
               data-ad-slot="REPLACE_WITH_SLOT_BOTTOM"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>
            try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch(e) {}
          </script>
        </div>
      </div>
    </section>

    <footer class="footer" id="footer-contact">
      <div class="shell">
        <div class="footer-grid">
          <div class="footer-brand">
            <div>Voetbal4All · voor spelers, ouders, trainers en clubs.</div>
            <div class="footer-legal">
              &copy; <span id="year"></span> Voetbal4All. Alle rechten voorbehouden.
            </div>
            <div class="footer-social">
              <a href="https://www.facebook.com/voetbal4all" target="_blank" rel="noopener noreferrer" class="footer-social-link">Facebook</a>
              <a href="https://www.instagram.com/voetbal.4.all/" target="_blank" rel="noopener noreferrer" class="footer-social-link">Instagram</a>
              <a href="https://www.tiktok.com/@voetbal4all.eu" target="_blank" rel="noopener noreferrer" class="footer-social-link">TikTok</a>
            </div>
          </div>
          <div class="footer-ad">
            FOOTER ADVERTENTIE / PARTNERLOGO<br>
            <span class="ad-size">Footer-banner</span>
          </div>
        </div>
      </div>
    </footer>

    <!-- LIGHTBOX for flyer/photos -->
    <div class="lightbox" id="lightbox" aria-hidden="true">
      <div class="lightbox-inner">
        <div class="lightbox-actions">
          <button type="button" class="lightbox-close" id="lightbox-close">Sluiten</button>
        </div>
        <img id="lightbox-img" class="lightbox-img" alt="Flyer / foto" />
      </div>
    </div>

  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const API_BASE = "https://voetbal4all-backend-database.onrender.com";

    const titleEl = document.getElementById("ev-title");
    const metaEl  = document.getElementById("ev-meta");
    const descEl  = document.getElementById("ev-desc");
    const extraEl = document.getElementById("ev-extra");
    const statusEl = document.getElementById("ev-status");
    const premiumEl = document.getElementById("ev-premium");

    const contactBtn = document.getElementById("ev-contact");

    const shareFb = document.getElementById("share-fb");
    const shareWa = document.getElementById("share-wa");
    const shareX  = document.getElementById("share-x");
    const shareCopy = document.getElementById("share-copy");

    const mediaWrap = document.getElementById("ev-media");
    const mediaGrid = document.getElementById("ev-media-grid");

    const lightbox = document.getElementById("lightbox");
    const lightboxImg = document.getElementById("lightbox-img");
    const lightboxClose = document.getElementById("lightbox-close");

    function fmtDateTime(iso){
      const d = new Date(iso);
      if (isNaN(d.getTime())) return "";
      return d.toLocaleString("nl-BE", {
        day: "2-digit", month: "long", year: "numeric",
        hour: "2-digit", minute: "2-digit"
      });
    }

    function typeLabel(t){
      const x = String(t || "").toLowerCase();
      if (x === "tournament" || x === "tornooi") return "Tornooi";
      if (x === "friendly" || x === "vriendschappelijk") return "Vriendschappelijk";
      if (x === "stage") return "Stage";
      if (x === "camp" || x === "voetbalkamp") return "Voetbalkamp";
      return t || "";
    }

    function getSlug(){
      const params = new URLSearchParams(location.search);
      return params.get("slug") || "";
    }

    function openLightbox(src){
      if (!src) return;
      lightboxImg.src = src;
      lightbox.classList.add("is-open");
      lightbox.setAttribute("aria-hidden", "false");
    }

    function closeLightbox(){
      lightbox.classList.remove("is-open");
      lightbox.setAttribute("aria-hidden", "true");
      lightboxImg.src = "";
    }

    lightboxClose?.addEventListener("click", closeLightbox);
    lightbox?.addEventListener("click", (e) => {
      if (e.target === lightbox) closeLightbox();
    });

    function setShareLinks(shareUrl, title){
      const text = encodeURIComponent(title || "Voetbal4All event");
      const url = encodeURIComponent(shareUrl);

      // These open the share dialog on the user's social network;
      // any clicks on the shared post will go to `shareUrl` (voetbal4all.eu).
      if (shareFb) shareFb.href = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
      if (shareWa) shareWa.href = `https://wa.me/?text=${text}%20${url}`;
      if (shareX)  shareX.href  = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;

      if (shareCopy) {
        shareCopy.onclick = async (ev) => {
          ev.preventDefault();
          try {
            await navigator.clipboard.writeText(shareUrl);
            alert("Link gekopieerd: " + shareUrl);
          } catch (e) {
            prompt("Kopieer deze link:", shareUrl);
          }
        };
      }
    }

    function renderMedia(mediaUrls){
      const urls = (mediaUrls || []).filter(Boolean);
      if (!urls.length) {
        if (mediaWrap) mediaWrap.style.display = "none";
        return;
      }
      if (mediaWrap) mediaWrap.style.display = "block";
      if (!mediaGrid) return;

      mediaGrid.innerHTML = urls.map((u, idx) => {
        const safe = String(u).replaceAll('"','&quot;');
        return `<img class="ev-media-thumb" src="${safe}" alt="Flyer/foto ${idx+1}" data-media-src="${safe}" loading="lazy" />`;
      }).join("");

      mediaGrid.querySelectorAll("[data-media-src]").forEach(img => {
        img.addEventListener("click", () => openLightbox(img.getAttribute("data-media-src")));
      });
    }

    async function loadEvent(){
      const slug = getSlug();
      if (!slug) {
        statusEl.style.display = "block";
        statusEl.textContent = "Geen event geselecteerd. Gebruik ?slug=...";
        return;
      }

      try {
        const res = await fetch(`${API_BASE}/api/events/slug/${encodeURIComponent(slug)}?nocache=1`);
        const data = await res.json();

        if (!data || !data.ok || !data.item) throw new Error("Bad response");

        const ev = data.item;

        document.title = (ev.title ? ev.title + " – Voetbal4All" : "Event – Voetbal4All");
        titleEl.textContent = ev.title || "Event";

        const parts = [];
        const t = typeLabel(ev.event_type);
        if (t) parts.push(t);
        if (ev.start_at) parts.push(fmtDateTime(ev.start_at));
        if (ev.city || ev.country) parts.push([ev.city, ev.country].filter(Boolean).join(" · "));
        metaEl.textContent = parts.join(" · ");

        // premium marker (UI behouden; later koppelen we status/Stripe)
        if (ev.is_premium) premiumEl.style.display = "block";

        // description + extra
        descEl.textContent = ev.description || "";

        const extras = [];
        if (ev.location_name) extras.push(`<div><strong>Locatie:</strong> ${ev.location_name}</div>`);
        if (ev.address) extras.push(`<div><strong>Adres:</strong> ${ev.address}</div>`);
        if (ev.organizer_name) extras.push(`<div><strong>Organisator:</strong> ${ev.organizer_name}</div>`);
        if (ev.organizer_email) extras.push(`<div><strong>E-mail:</strong> ${ev.organizer_email}</div>`);
        if (ev.organizer_phone) extras.push(`<div><strong>Telefoon:</strong> ${ev.organizer_phone}</div>`);
        if (ev.organizer_url) extras.push(`<div><strong>Website:</strong> ${ev.organizer_url}</div>`);
        extraEl.innerHTML = extras.join("");

        // Share URL must always be our platform URL
        const shareUrl = "https://www.voetbal4all.eu/event.html?slug=" + encodeURIComponent(slug);
        const shareTitle = (ev.title || "Event") + " – Voetbal4All";
        setShareLinks(shareUrl, shareTitle);

        // Flyer / photos support (now + future-proof)
        // Supported fields (if present): cover_image_url, flyer_image_url, photo_urls (array or comma-separated)
        const media = [];
        if (ev.cover_image_url) media.push(ev.cover_image_url);
        if (ev.flyer_image_url) media.push(ev.flyer_image_url);
        if (Array.isArray(ev.photo_urls)) media.push(...ev.photo_urls);
        if (typeof ev.photo_urls === 'string' && ev.photo_urls.trim()) {
          media.push(...ev.photo_urls.split(',').map(s => s.trim()).filter(Boolean));
        }
        renderMedia(media);

        // Contact (mailto)
        contactBtn.onclick = () => {
          const ok = confirm("Door verder te gaan, ga je akkoord dat jouw e-mailadres gebruikt wordt om te reageren via Voetbal4All.");
          if (!ok) return;

          const email = prompt("Vul je e-mailadres in zodat de organisator je kan contacteren:");
          if (!email) return alert("E-mailadres is nodig om te kunnen reageren.");

          const subject = encodeURIComponent("Reactie via Voetbal4All – " + (ev.title || "Event"));
          const body = encodeURIComponent(
            "Event: " + (ev.title || "") +
            "\nSlug: " + slug +
            "\n\nE-mailadres: " + email +
            "\n\nBericht:\n(Voeg je bericht toe.)"
          );

          location.href = "mailto:voetbal4all@outlook.com?subject=" + subject + "&body=" + body;
        };

      } catch (e) {
        console.error("[EVENT] load failed", e);
        statusEl.style.display = "block";
        statusEl.textContent = "Event kon niet geladen worden.";
      }
    }

    loadEvent();
  </script>

  <script src="assets/js/nav-mobile.js"></script>
  <script src="assets/js/live-banner.js"></script>
</body>
</html>
