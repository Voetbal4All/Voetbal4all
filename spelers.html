<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Voetbal4All - Spelers zoeken club</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="page">

  <!-- NAVBAR -->
  <header class="navbar">
    <div class="shell">
      <div class="navbar-inner">
        <a href="index.html" class="brand">
          <div class="brand-mark">V4</div>
          <div>
            <div class="brand-text-main">Voetbal4All</div>
            <div class="brand-text-sub">Football Â· Data Â· Clubs</div>
          </div>
        </a>

        <nav class="nav-links">
          <a href="index.html" class="nav-link">Home</a>
          <a href="artikels.html" class="nav-link">Artikels</a>
          <a href="events.html" class="nav-link">Events</a>
          <a href="clubvacatures.html" class="nav-link">Clubvacatures</a>
          <a href="trainers.html" class="nav-link">Trainers</a>
          <a href="spelers.html" class="nav-link nav-link--active">Spelers</a>
          <a href="sportief.html" class="nav-link">Sportief</a>
          <a href="#footer-contact" class="nav-link">Contact</a>

          <a href="adverteren.html" class="nav-cta">
            <span>Adverteer nu</span>
            <span>Sponsor &amp; Ads</span>
          </a>
        </nav>

        <button class="nav-burger" aria-label="Menu">â˜°</button>
      </div>
    </div>
  </header>

  <main>
    <section class="section-main">
      <div class="shell">

        <!-- FORMULIER SPELER -->
        <div class="form-card">
          <h1 class="form-title">Speler zoekt club</h1>
          <p class="form-sub">
            Vul je profiel in en kies of je anoniem wil blijven. Je e-mailadres en naam worden nooit in de advertentie getoond
            als je anoniem aanvinkt. Clubs reageren via Voetbal4All.
          </p>

          <form id="player-form">
            <div class="form-grid">

              <!-- Naam -->
              <div class="form-field">
                <label class="form-label" for="player-name">
                  Naam <small>(optioneel, kan anoniem)</small>
                </label>
                <input id="player-name" name="name" type="text" class="form-input" placeholder="Naam speler" />
                <label class="form-helper">
                  <input type="checkbox" id="player-hide-name" checked />
                  Toon mijn naam niet publiek (anoniem)
                </label>
              </div>

              <!-- Woonplaats -->
              <div class="form-field">
                <label class="form-label" for="player-city">
                  Woonplaats <small>(optioneel, kan anoniem)</small>
                </label>
                <input id="player-city" name="city" type="text" class="form-input" placeholder="Bv. Geel" />
                <label class="form-helper">
                  <input type="checkbox" id="player-hide-city" checked />
                  Toon mijn woonplaats niet publiek
                </label>
              </div>

              <!-- E-mail (verplicht, nooit publiek getoond) -->
              <div class="form-field">
                <label class="form-label" for="player-email">
                  E-mailadres <small>(verplicht â€“ wordt nooit in de advertentie getoond)</small>
                </label>
                <input id="player-email" name="email" type="email" class="form-input" required placeholder="jouw@email.be" />
              </div>

              <!-- Land -->
              <div class="form-field">
                <span class="form-label">Land <small>(verplicht)</small></span>
                <div class="form-checkbox-row">
                  <label class="flag-label">
                    <input type="radio" name="country" value="BE" id="player-country-be" required />
                    <span>ðŸ‡§ðŸ‡ª BelgiÃ«</span>
                  </label>
                  <label class="flag-label">
                    <input type="radio" name="country" value="NL" id="player-country-nl" />
                    <span>ðŸ‡³ðŸ‡± Nederland</span>
                  </label>
                </div>
              </div>

              <!-- Regio (dynamisch per land) -->
              <div class="form-field">
                <span class="form-label">Gewenste regio <small>(verplicht â€“ per land)</small></span>
                <div id="player-region-wrapper" class="form-checkbox-row">
                  <!-- wordt via JS gevuld -->
                </div>
                <div class="form-helper">Selecteer Ã©Ã©n of meerdere regio's.</div>
              </div>

              <!-- Leeftijd -->
              <div class="form-field">
                <label class="form-label" for="player-age">
                  Leeftijd <small>(verplicht)</small>
                </label>
                <input id="player-age" name="age" type="number" min="5" max="60" class="form-input" required placeholder="Bv. 17" />
              </div>

              <!-- Positie(s) -->
              <div class="form-field">
                <span class="form-label">Positie(s) <small>(verplicht â€“ meerdere mogelijk)</small></span>
                <div class="form-checkbox-row">
                  <label class="pill-checkbox"><input type="checkbox" value="Doelman" /> Doelman</label>
                  <label class="pill-checkbox"><input type="checkbox" value="Verdediger" /> Verdediger</label>
                  <label class="pill-checkbox"><input type="checkbox" value="Middenvelder" /> Middenvelder</label>
                  <label class="pill-checkbox"><input type="checkbox" value="Aanvaller" /> Aanvaller</label>
                  <label class="pill-checkbox"><input type="checkbox" value="Vleugelspeler" /> Vleugelspeler</label>
                </div>
              </div>

              <!-- Gewenst niveau -->
              <div class="form-field">
                <span class="form-label">Gewenst niveau <small>(verplicht â€“ per land)</small></span>
                <div id="player-level-wrapper" class="form-checkbox-row">
                  <!-- wordt via JS gevuld -->
                </div>
                <div class="form-helper">Selecteer Ã©Ã©n of meerdere niveaus die voor jou passen.</div>
              </div>

              <!-- Korte beschrijving -->
              <div class="form-field" style="grid-column:1/-1;">
                <label class="form-label" for="player-description">
                  Korte beschrijving / extra info
                </label>
                <textarea id="player-description" class="form-textarea" placeholder="Beschrijf jezelf kort als speler, beschikbaarheid, sterke punten..."></textarea>
              </div>

            </div>

            <div class="form-actions">
              <button type="submit" class="btn-primary">Advertentie plaatsen (demo)</button>
              <span class="form-helper">
                Dit is een demoversie: gegevens worden nog niet definitief opgeslagen.
              </span>
            </div>
          </form>
        </div>

        <!-- OVERZICHT SPELERS-ADVERTENTIES -->
        <section class="section-main" style="padding-top:0;">
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-caption">Overzicht</div>
                <div class="card-title">Spelers die een club zoeken</div>
              </div>
              <span class="pill-small">Delen &amp; reageren via Voetbal4All</span>
            </div>
            <p class="note">
              Hieronder een aantal voorbeeldprofielen. In de echte versie worden nieuwe formulieren automatisch toegevoegd.
            </p>

            <div id="player-ads" class="ad-card-list">
              <!-- JS vult hier dummy + nieuwe ads -->
            </div>
          </div>
        </section>

      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer" id="footer-contact">
    <div class="shell">
      <div class="footer-grid">
        <div class="footer-brand">
          <div>Voetbal4All Â· voor spelers, ouders, trainers en clubs.</div>
          <div class="footer-legal">
            &copy; <span id="year"></span> Voetbal4All. Alle rechten voorbehouden.
            Â· Mogelijkheden voor hoofdsponsor, partners en advertenties.
          </div>
          <div class="footer-social">
            <a href="https://www.facebook.com/voetbal4all" target="_blank" class="footer-social-link">Facebook</a>
            <a href="https://www.instagram.com/voetbal4all" target="_blank" class="footer-social-link">Instagram</a>
          </div>
        </div>
        <div class="footer-ad">
          FOOTER ADVERTENTIE / PARTNERLOGO<br>
          <span class="ad-size">Footer-banner met zichtbaarheid voor terugkerende bezoekers.</span>
        </div>
      </div>
    </div>
  </footer>

</div>

<!-- MODAL VOOR REAGEREN OP SPELER -->
<div class="modal-backdrop" id="reply-modal">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Reageren op speler</div>
      <button class="modal-close" type="button" data-close-modal>&times;</button>
    </div>
    <p class="modal-note">
      Je reactie wordt via Voetbal4All doorgestuurd naar de speler. Zijn/haar e-mailadres blijft verborgen.
    </p>
    <form id="reply-form">
      <input type="hidden" id="reply-ad-id" />
      <div class="form-field">
        <label class="form-label" for="reply-name">Naam club / contactpersoon</label>
        <input id="reply-name" type="text" class="form-input" required placeholder="Bv. K. ASV Geel â€“ JeugdcoÃ¶rdinator" />
      </div>
      <div class="form-field">
        <label class="form-label" for="reply-email">
          Jouw e-mailadres <small>(verplicht)</small>
        </label>
        <input id="reply-email" type="email" class="form-input" required placeholder="contact@club.be" />
      </div>
      <div class="form-field">
        <label class="form-label" for="reply-message">Bericht aan de speler</label>
        <textarea id="reply-message" class="form-textarea" required placeholder="Korte voorstelling van je club en waarom je contact opneemt."></textarea>
      </div>
      <div class="form-field">
        <label class="form-helper">
          <input type="checkbox" id="reply-consent" required />
          Ik ga akkoord dat Voetbal4All mijn bericht en e-mailadres doorstuurt naar deze speler.
        </label>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn-primary">Verstuur via Voetbal4All</button>
      </div>
    </form>
    <div class="modal-footer">
      In de eerste versie verloopt dit via <strong>voetbal4all@outlook.com</strong>. Later kan dit via een automatische koppeling.
    </div>
  </div>
</div>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  // Regio's & niveaus per land
  const REGIONS = {
    BE: ["Antwerpen", "Limburg", "Vlaams-Brabant", "Oost-Vlaanderen", "West-Vlaanderen", "Brussel"],
    NL: ["Noord-Brabant", "Limburg (NL)", "Gelderland", "Noord-Holland", "Zuid-Holland", "Overijssel", "Utrecht"]
  };

  const LEVELS = {
    BE: ["Gewestelijk", "Provinciaal", "Interprovinciaal", "Elite"],
    NL: ["Recreatief", "4e klasse", "3e klasse", "2e klasse", "1e klasse", "Hoofdklasse", "Divisie"]
  };

  function renderCheckboxPills(wrapperId, items, namePrefix) {
    const wrapper = document.getElementById(wrapperId);
    wrapper.innerHTML = "";
    items.forEach((item, idx) => {
      const id = `${namePrefix}-${idx}`;
      const label = document.createElement("label");
      label.className = "pill-checkbox";
      label.innerHTML = `<input type="checkbox" id="${id}" value="${item}" /> ${item}`;
      wrapper.appendChild(label);
    });
  }

  function updateRegionsAndLevels(country) {
    if (!country) return;
    renderCheckboxPills("player-region-wrapper", REGIONS[country], "player-region");
    renderCheckboxPills("player-level-wrapper", LEVELS[country], "player-level");
  }

  document.getElementById("player-country-be").addEventListener("change", e => {
    if (e.target.checked) updateRegionsAndLevels("BE");
  });

  document.getElementById("player-country-nl").addEventListener("change", e => {
    if (e.target.checked) updateRegionsAndLevels("NL");
  });

  // Dummy data + nieuwe advertenties
  const playerAdsContainer = document.getElementById("player-ads");
  let playerAdCounter = 1;

  function createPlayerAdCard(ad) {
    const id = `player-ad-${ad.id}`;
    const card = document.createElement("article");
    card.className = "ad-card";
    card.id = id;
    card.dataset.adId = id;

    const displayName = ad.anonymousName ? "Anonieme speler" : ad.name || "Speler";
    const displayCity = ad.anonymousCity || !ad.city ? "" : ` Â· ${ad.city}`;
    const countryFlag = ad.country === "BE" ? "ðŸ‡§ðŸ‡ª" : "ðŸ‡³ðŸ‡±";

    card.innerHTML = `
      <div class="ad-card-header">
        <div>
          <div class="ad-card-title">${displayName}</div>
          <div class="ad-card-meta">${countryFlag} ${ad.countryLabel}${displayCity}</div>
        </div>
        <div class="ad-card-meta">${ad.age} jaar Â· ${ad.positions.join(", ")}</div>
      </div>
      <div class="ad-card-body">
        <strong>Niveau:</strong> ${ad.levels.join(", ")}<br/>
        <strong>Regio:</strong> ${ad.regions.join(", ")}<br/>
        ${ad.description ? `<br/>${ad.description}` : ""}
      </div>
      <div class="ad-card-actions">
        <button type="button" class="btn-ghost-sm" data-reply-ad="${id}">Reageer op speler</button>
        <a href="#" class="btn-ghost-sm btn-share" data-share-ad="${id}">Delen</a>
      </div>
    `;
    return card;
  }

  // Voorbeeldadvertentie
  function seedDemoPlayers() {
    const demo = [
      {
        id: playerAdCounter++,
        name: "Tom (voorbeeld)",
        anonymousName: true,
        city: "Kempen",
        anonymousCity: true,
        country: "BE",
        countryLabel: "BelgiÃ«",
        age: 17,
        positions: ["Middenvelder", "Aanvaller"],
        levels: ["Provinciaal"],
        regions: ["Antwerpen", "Limburg"],
        description: "Technische middenvelder met goed overzicht, zoekt ambitieuze opleidingsclub."
      }
    ];
    demo.forEach(ad => playerAdsContainer.appendChild(createPlayerAdCard(ad)));
  }

  seedDemoPlayers();

  // Form submit (demo â€“ geen echte backend)
  document.getElementById("player-form").addEventListener("submit", function (e) {
    e.preventDefault();

    const form = e.target;
    const name = document.getElementById("player-name").value.trim();
    const city = document.getElementById("player-city").value.trim();
    const email = document.getElementById("player-email").value.trim();
    const anonymousName = document.getElementById("player-hide-name").checked;
    const anonymousCity = document.getElementById("player-hide-city").checked;
    const countryInput = form.querySelector("input[name='country']:checked");
    if (!countryInput) {
      alert("Kies een land.");
      return;
    }
    const country = countryInput.value;
    const countryLabel = country === "BE" ? "BelgiÃ«" : "Nederland";
    const age = document.getElementById("player-age").value;

    const regions = Array.from(document.querySelectorAll("#player-region-wrapper input:checked")).map(i => i.value);
    const positions = Array.from(document.querySelectorAll("#player-region-wrapper input")).length === 0
      ? []
      : Array.from(document.querySelectorAll(".form-checkbox-row input[type='checkbox'][value][value]:not(#player-hide-name):not(#player-hide-city)"))
        .filter(i => i.closest("#player-region-wrapper") === null && i.closest("#player-level-wrapper") === null && i.checked && ["Doelman","Verdediger","Middenvelder","Aanvaller","Vleugelspeler"].includes(i.value))
        .map(i => i.value);

    const posBoxes = Array.from(document.querySelectorAll(".form-checkbox-row input[type='checkbox']"))
      .filter(i => ["Doelman","Verdediger","Middenvelder","Aanvaller","Vleugelspeler"].includes(i.value));
    const selectedPos = posBoxes.filter(i => i.checked).map(i => i.value);

    const levels = Array.from(document.querySelectorAll("#player-level-wrapper input:checked")).map(i => i.value);
    const description = document.getElementById("player-description").value.trim();

    if (!selectedPos.length) {
      alert("Kies minstens Ã©Ã©n positie.");
      return;
    }
    if (!regions.length) {
      alert("Kies minstens Ã©Ã©n regio.");
      return;
    }
    if (!levels.length) {
      alert("Kies minstens Ã©Ã©n niveau.");
      return;
    }
    if (!email) {
      alert("E-mailadres is verplicht.");
      return;
    }

    const ad = {
      id: playerAdCounter++,
      name,
      anonymousName,
      city,
      anonymousCity,
      country,
      countryLabel,
      age,
      positions: selectedPos,
      levels,
      regions,
      description,
      email // wordt niet getoond; enkel later gebruikt via backend
    };

    const card = createPlayerAdCard(ad);
    playerAdsContainer.prepend(card);
    form.reset();
    document.getElementById("player-hide-name").checked = true;
    document.getElementById("player-hide-city").checked = true;
    alert("Demo: je advertentie is toegevoegd aan het overzicht (niet permanent opgeslagen).");
  });

  // Modal open/close + mailto
  const modalBackdrop = document.getElementById("reply-modal");
  const replyForm = document.getElementById("reply-form");

  function openReplyModal(adId) {
    document.getElementById("reply-ad-id").value = adId;
    modalBackdrop.classList.add("modal-open");
  }

  function closeReplyModal() {
    modalBackdrop.classList.remove("modal-open");
  }

  document.addEventListener("click", function (e) {
    if (e.target.matches("[data-reply-ad]")) {
      const adId = e.target.getAttribute("data-reply-ad");
      openReplyModal(adId);
    }
    if (e.target.hasAttribute("data-close-modal") || e.target === modalBackdrop) {
      closeReplyModal();
    }
  });

  replyForm.addEventListener("submit", function (e) {
    e.preventDefault();
    const adId = document.getElementById("reply-ad-id").value;
    const name = document.getElementById("reply-name").value.trim();
    const email = document.getElementById("reply-email").value.trim();
    const msg = document.getElementById("reply-message").value.trim();
    const consent = document.getElementById("reply-consent").checked;

    if (!consent) {
      alert("Je moet akkoord gaan om via Voetbal4All te reageren.");
      return;
    }

    const subject = encodeURIComponent("Reactie via Voetbal4All op spelersadvertentie " + adId);
    const body = encodeURIComponent(
      "Advertentie-ID: " + adId +
      "\n\nVan: " + name +
      "\nE-mail: " + email +
      "\n\nBericht:\n" + msg
    );

    window.location.href = "mailto:voetbal4all@outlook.com?subject=" + subject + "&body=" + body;
    closeReplyModal();
  });

  // Social share: maakt URL met anker naar specifieke advertentie
  function setupShareLinks() {
    const baseUrl = window.location.origin + window.location.pathname;
    document.querySelectorAll("[data-share-ad]").forEach(link => {
      const adId = link.getAttribute("data-share-ad");
      const urlWithAnchor = baseUrl + "#" + adId;
      const shareUrl = "https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(urlWithAnchor);
      link.setAttribute("href", shareUrl);
      link.setAttribute("target", "_blank");
    });
  }

  setupShareLinks();
</script>
</body>
</html>
